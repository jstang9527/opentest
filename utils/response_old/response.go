package views

import (
	"fmt"
	"net/http"
	"time"
)

type response struct {
	dialAddr   string // 用户地址
	dialTime   string // 访问时间
	dialURI    string // 访问URI
	statusCode uint16 // 状态码
	dialAgent  string // 客户端
}

//构造函数
func new(dialAddr, dialTime, dialURI, dialAgent string, statusCode uint16) *response {
	return &response{
		dialAddr:   dialAddr,
		dialTime:   dialTime,
		dialURI:    dialURI,
		statusCode: statusCode,
		dialAgent:  dialAgent,
	}
}

//DialLog 访问日志
func DialLog(r *http.Request, statusCode uint16) {
	fmt.Printf(`%v -- [%v] %d "%v" "-" "%v"`, r.RemoteAddr, time.Now().Format("2006-01-02 15:04:05 CST"), statusCode, r.RequestURI, r.Header.Get("User-Agent"))
	fmt.Println()
}
