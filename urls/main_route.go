package urls

import (
	"net/http"
	"strings"

	"github.com/jstang9527/opentest/apis"
	"github.com/jstang9527/opentest/views"
)

//Urls 根路由
func Urls(w http.ResponseWriter, r *http.Request) { //主路由
	uri := r.RequestURI
	uri = strings.TrimSpace(uri)
	if uri == "/" { //只有一个跟
		views.IndexRequest(w, r) //主页
	} else if uri == "/favicon.ico" {
		views.IconRequest(w, r)
	} else if strings.HasPrefix(uri, "/api") {
		apis.App(w, r)
	} else if strings.HasPrefix(uri, "/resources") { //其他静态资源
		views.ResourcesRequest(w, r)
	} else if strings.HasPrefix(uri, "/static") { //网站静态资源
		views.StaticRequest(w, r)
	} else { //没有定义的路径不给走,直接404
		views.DialLog(r, 404)
		w.Write([]byte(`<h1 style="color:red;text-align:center">404 网页丢失了</h1>`))
	}
}
